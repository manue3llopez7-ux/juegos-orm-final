<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>CRUD Juegos - {% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
<nav class="navbar is-warning" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="{{ url_for('juegos') }}">
            <span class="icon is-small"><i class="fas fa-gamepad"></i></span>
            <span class="ml-2">Gestión de Juegos</span>
        </a>
    </div>
    <div class="navbar-menu">
        <div class="navbar-end">
            {% if current_user.is_authenticated %}
                <a class="navbar-item" href="{{ url_for('auth.logout') }}">Cerrar Sesión</a>
            {% else %}
                <a class="navbar-item" href="{{ url_for('auth.login') }}">Ingresar</a>
                <a class="navbar-item" href="{{ url_for('auth.register') }}">Registro</a>
            {% endif %}
        </div>
    </div>
</nav>

<div class="container mt-5">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="columns is-centered">
                <div class="column is-half">
                    {% for category, message in messages %}
                        <div class="notification is-{{ category if category in ['success', 'danger', 'info'] else 'info' }}">
                            <button class="delete"></button>
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        (document.querySelectorAll('.notification .delete') || []).forEach(($delete) => {
            const $notification = $delete.parentNode;

            $delete.addEventListener('click', () => {
                $notification.parentNode.removeChild($notification);
            });
        });
    });
</script>
</body>
</html>